# =========================================
# FRP 服务端核心配置 (frps.toml)
# =========================================

# 基础服务配置
# ----------------------------------------
# 服务端监听地址，用于接收 frpc 的连接
bindAddr = "0.0.0.0"
# 服务端监听端口
bindPort = 7000

# 协议端口配置
# ----------------------------------------
# HTTP 类型代理监听的端口，启用后才能支持 HTTP 类型的代理
vhostHTTPPort = 80
# HTTPS 类型代理监听的端口，启用后才能支持 HTTPS 类型的代理
vhostHTTPSPort = 443
# 服务端监听 KCP 协议端口，用于接收配置了使用 KCP 协议的 frpc 连接
kcpBindPort = 7000
# 服务端监听 QUIC 协议端口，用于接收配置了使用 QUIC 协议的 frpc 连接
quicBindPort = 7000
# tcpmux 类型且复用器为 httpconnect 的代理监听的端口
tcpmuxHTTPConnectPort = 0
# 对于 tcpmux 类型的代理是否透传 CONNECT 请求
tcpmuxPassthrough = false

# 安全与鉴权配置
# ----------------------------------------
# 鉴权方式, token / oidc
auth.method = "token"
# token
auth.token = "1234"
# 鉴权信息附加范围
# HeartBeats:   心跳
# NewWorkConns: 新工作连接
auth.additionalScopes = ["HeartBeats", "NewWorkConns"]
# 是否只接受启用了 TLS 的客户端连接
transport.tls.force = false
# TLS 协议配置，内嵌结构
# TLS 证书文件路径
# transport.tls.certFile = ""
# TLS 密钥文件路径
# transport.tls.keyFile = ""
# CA 证书文件路径
# transport.tls.trustedCaFile = ""
# TLS Server 名称
# transport.tls.serverName = ""

# Dashboard 与监控配置
# ----------------------------------------
# webServer 监听地址
webServer.addr = "127.0.0.1"
# webServer 监听端口
webServer.port = 7500
# HTTP BasicAuth 用户名
webServer.user = "vaciller_frps"
# HTTP BasicAuth 密码
webServer.password = "19990830_frps"
# 是否提供 Prometheus 监控接口，需要同时启用了 webServer 后才会生效
enablePrometheus = false
# 静态资源目录，Dashboard 使用的资源默认打包在二进制文件中，通过指定此参数使用自定义的静态资源
# webServer.assetsDir = ""
# 启动 Go HTTP pprof, 用于应用调试
webServer.pprofEnable = false
# TLS 证书文件路径
# webServer.tls.certFile = ""
# TLS 密钥文件路径
# webServer.tls.keyFile = ""
# CA 证书文件路径
# webServer.tls.trustedCaFile = ""
# TLS Server 名称
# webServer.tls.serverName = ""

# 日志配置
# ----------------------------------------
# 日志输出文件路径, 如果为 console, 则会将日志打印在标准输出中
log.to = "/etc/frp/log/frps.log"
# 日志级别, trace / debug / info / warn / error
log.level = "info"
# 日志文件保留天数
log.maxDays = 7
# 禁用标准输出中的日志颜色
log.disablePrintColor = false

# 网络传输层配置
# ----------------------------------------
# tcp mux 的心跳检查间隔时间
transport.tcpMuxKeepaliveInterval = 60
# 和客户端底层 TCP 连接的 keepalive 间隔时间, 配置为负数表示不启用
transport.tcpKeepalive = 7200
# 允许客户端设置的最大连接池大小，如果客户端配置的值大于此值，会被强制修改为最大值
transport.maxPoolCount = 1
# 服务端和客户端心跳连接的超时时间
transport.heartbeatTimeout = 90
# QUIC 协议配置参数
transport.quic.keepalivePeriod = 10
transport.quic.maxIdleTimeout = 30
transport.quic.maxIncomingStreams = 100000

# 客户端限制与资源控制
# ----------------------------------------
# 限制单个客户端最大同时存在的代理数
maxPortsPerClient = 100
# 用户建立连接后等待客户端响应的超时时间
userConnTimeout = 10
# 代理 UDP 服务时支持的最大包长度, 服务端和客户端的值需要一致
udpPacketSize = 1500
# 打洞策略数据的保留时间
natholeAnalysisDataReserveHours = 168

# 代理行为配置
# ----------------------------------------
# 代理监听地址，可以使代理监听在不同的网卡地址
proxyBindAddr = "0.0.0.0"
# HTTP 类型代理在服务端的 ResponseHeader 超时时间
vhostHTTPTimeout = 60
# 二级域名后缀
# subDomainHost = "example.com"
# 自定义 404 错误页面地址
# custom404Page = "/etc/frp/404.html"
# 服务端返回详细错误信息给客户端
detailedErrorsToClient = true

# 端口范围限制
# ----------------------------------------
# 允许代理绑定的服务端端口
allowPorts = [
    # {start = 2000, end = 3000},
    # {single = 2000}
]

# SSH 隧道网关配置 (可选功能)
# ----------------------------------------
# SSH 服务器监听端口
# sshTunnelGateway.bindPort = 6000
# SSH 服务器私钥文件路径。若为空，frps将读取autoGenPrivateKeyPath路径下的私钥文件
# sshTunnelGateway.privateKeyFile = ""
# 私钥文件自动生成路径, 默认为 ./.autogen_ssh_key, 若文件不存在或内容为空, frps将自动生成RSA私钥文件并存储到该路径
# sshTunnelGateway.autoGenPrivateKeyPath = ""
# SSH 客户端授权密钥文件路径, 若为空, 则不进行SSH客户端鉴权认证, 非空可实现SSH免密登录认证
# sshTunnelGateway.authorizedKeysFile = ""

# HTTP 插件配置 (高级功能)
# ----------------------------------------
# 服务端 HTTP 插件配置, []HTTPPluginOptions
# httpPlugins = []
